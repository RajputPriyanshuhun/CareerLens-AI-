<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CareerLens AI | Intelligent Resume Insights</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=Outfit:wght@300;400;600&display=swap');
        
        body { font-family: 'Outfit', sans-serif; background: #02040a; color: #f0f6fc; overflow-x: hidden; }
        .font-cyber { font-family: 'Space Grotesk', sans-serif; }

        /* Splash Screen Logic */
        #splash-screen {
            position: fixed; inset: 0; background: #000; z-index: 999;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: transform 0.8s cubic-bezier(0.87, 0, 0.13, 1);
        }
        .splash-hidden { transform: translateY(-100%); }

        /* Matrix Background */
        #bg-canvas { position: fixed; top: 0; left: 0; z-index: -1; opacity: 0.1; }

        /* Glass Cards */
        .glass-card { background: rgba(13, 17, 23, 0.7); backdrop-filter: blur(15px); border: 1px solid rgba(48, 54, 61, 0.8); transition: 0.3s; }
        .glass-card:hover { border-color: #6366f1; }
        
        .btn-neon { background: #6366f1; box-shadow: 0 0 15px rgba(99, 102, 241, 0.4); }
        .btn-neon:hover { transform: scale(1.02); box-shadow: 0 0 25px rgba(99, 102, 241, 0.6); }
    </style>
</head>
<body>
    <canvas id="bg-canvas"></canvas>

    <div id="app">
        <div id="splash-screen" :class="{ 'splash-hidden': !showSplash }">
            <div class="text-center">
                <div class="mb-6 flex justify-center">
                    <div class="p-4 bg-indigo-600/20 rounded-full border border-indigo-500 animate-pulse">
                        <i data-lucide="brain-circuit" class="w-12 h-12 text-indigo-400"></i>
                    </div>
                </div>
                <h1 class="text-4xl font-bold font-cyber tracking-[0.3em] text-white mb-2">CAREERLENS <span class="text-indigo-500 text-2xl tracking-normal">AI</span></h1>
                <div class="w-48 h-1 bg-slate-800 mx-auto rounded-full overflow-hidden">
                    <div class="h-full bg-indigo-500 transition-all duration-[2000ms]" :style="{ width: splashProgress + '%' }"></div>
                </div>
                <p class="mt-4 text-[10px] font-mono text-slate-500 tracking-widest uppercase">{{ splashStatus }}</p>
            </div>
        </div>

        <div class="p-6 max-w-7xl mx-auto" v-if="!showSplash">
            <header class="flex flex-col md:flex-row justify-between items-center mb-12 gap-6 animate-in fade-in duration-700">
                <div class="flex items-center gap-4">
                    <div class="p-2 bg-indigo-600 rounded-xl">
                        <i data-lucide="scan-face" class="text-white w-6 h-6"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold font-cyber">CareerLens AI</h1>
                        <p class="text-slate-500 text-[10px] tracking-widest uppercase">Open Source Career Intelligence</p>
                    </div>
                </div>
                <div class="flex gap-4 items-center">
                    <div class="flex bg-slate-900 rounded-lg p-1 text-[10px] font-bold">
                        <button @click="lang='en'" :class="lang==='en'?'bg-indigo-600 text-white':''" class="px-4 py-1.5 rounded-md transition">EN</button>
                        <button @click="lang='hi'" :class="lang==='hi'?'bg-indigo-600 text-white':''" class="px-4 py-1.5 rounded-md transition">हिंदी</button>
                    </div>
                </div>
            </header>

            <main class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                <div class="lg:col-span-4 space-y-6">
                    <div class="glass-card p-8 rounded-3xl text-center border-dashed border-2">
                        <div @click="$refs.fileInput.click()" class="cursor-pointer group">
                            <input type="file" ref="fileInput" class="hidden" @change="handleFileUpload">
                            <i data-lucide="cloud-upload" class="w-12 h-12 mx-auto mb-4 text-slate-500 group-hover:text-indigo-400 transition-all"></i>
                            <h3 class="text-sm font-bold tracking-tight">{{ t('uploadTitle') }}</h3>
                            <p class="text-[10px] text-slate-500 mt-2 uppercase">PDF / DOCX < 5MB</p>
                        </div>
                    </div>

                    <div v-if="resumeData" class="glass-card p-6 rounded-3xl animate-in slide-in-from-left duration-500">
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-xs font-bold text-slate-500 uppercase tracking-widest">ATS Match Score</span>
                            <span class="text-indigo-400 font-bold">{{ atsScore }}%</span>
                        </div>
                        <div class="h-1 bg-slate-800 rounded-full overflow-hidden">
                            <div class="h-full bg-indigo-500" :style="{ width: atsScore + '%' }"></div>
                        </div>
                    </div>
                </div>

                <div class="lg:col-span-8 space-y-6">
                    <div v-if="!resumeData" class="h-96 flex flex-col items-center justify-center border-2 border-slate-900 border-dashed rounded-[3rem] opacity-40">
                        <i data-lucide="layers" class="w-16 h-16 mb-4"></i>
                        <p class="text-xs font-cyber tracking-widest uppercase">Initializing Neural Analysis Hub</p>
                    </div>

                    <div v-else class="space-y-6 animate-in fade-in slide-in-from-bottom-10 duration-1000">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="glass-card p-8 rounded-[2rem]">
                                <h3 class="text-xs font-bold text-slate-500 uppercase mb-6 tracking-widest">Skill Radar Pro</h3>
                                <canvas id="radarChart"></canvas>
                            </div>
                            <div class="glass-card p-8 rounded-[2rem] bg-indigo-600/5">
                                <h3 class="text-xs font-bold text-indigo-400 uppercase mb-6 tracking-widest">Interview Simulation</h3>
                                <div class="space-y-4">
                                    <div v-for="(q, i) in interviewQuestions" class="p-4 bg-black/40 border border-slate-800 rounded-2xl">
                                        <p class="text-[12px] leading-relaxed italic text-slate-300">"{{ q }}"</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-wrap gap-4 mt-8">
                            <button @click="searchJobs" class="flex-1 py-4 btn-neon rounded-2xl text-[10px] font-black uppercase tracking-widest text-white transition-all">
                                Deploy Job Matcher
                            </button>
                            <button @click="downloadAnalysis" class="px-8 py-4 glass-card rounded-2xl text-[10px] font-bold uppercase tracking-widest hover:bg-slate-800 flex items-center gap-2">
                                <i data-lucide="download" class="w-3"></i> Report
                            </button>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        const { createApp, ref, onMounted, nextTick } = Vue;

        createApp({
            setup() {
                const showSplash = ref(true);
                const splashProgress = ref(0);
                const splashStatus = ref("Connecting to Neural Engine...");
                const lang = ref('en');
                const resumeData = ref(null);
                const atsScore = ref(0);
                const interviewQuestions = ref([]);
                let radarChart = null;

                const t = (k) => ({
                    en: { uploadTitle: "Uplink Resume File" },
                    hi: { uploadTitle: "फ़ाइल अपलोड करें" }
                })[lang.value][k] || k;

                // Feature: Startup Animation Logic
                const runSplash = () => {
                    const statusText = ["Syncing Models...", "Indexing NLP...", "Booting CareerLens AI"];
                    let i = 0;
                    const timer = setInterval(() => {
                        splashProgress.value += 2;
                        if(splashProgress.value % 30 === 0) { splashStatus.value = statusText[i]; i++; }
                        if(splashProgress.value >= 100) {
                            clearInterval(timer);
                            setTimeout(() => { 
                                showSplash.value = false;
                                nextTick(() => lucide.createIcons());
                            }, 500);
                        }
                    }, 40);
                };

                const handleFileUpload = async (e) => {
                    const file = e.target.files[0];
                    if(!file) return;
                    const text = file.type.includes('pdf') ? await parsePDF(file) : "Sample Resume Content";
                    processAI(text, file.name);
                };

                const parsePDF = async (f) => {
                    const pdf = await pdfjsLib.getDocument({data: await f.arrayBuffer()}).promise;
                    let text = "";
                    for(let i=1; i<=pdf.numPages; i++) {
                        const page = await pdf.getPage(i);
                        text += (await page.getTextContent()).items.map(s => s.str).join(" ");
                    }
                    return text;
                };

                const processAI = (text, name) => {
                    const skills = ["JavaScript", "Python", "React", "Node.js"].filter(s => text.toLowerCase().includes(s.toLowerCase()));
                    resumeData.value = { name, skills };
                    atsScore.value = 88;
                    interviewQuestions.value = [`Explain a complex problem you solved using ${skills[0] || 'your core skills'}.`, `How do you stay updated with industry trends?` ];
                    nextTick(() => {
                        renderChart();
                        lucide.createIcons();
                    });
                };

                const renderChart = () => {
                    const ctx = document.getElementById('radarChart');
                    if(radarChart) radarChart.destroy();
                    radarChart = new Chart(ctx, {
                        type: 'radar',
                        data: {
                            labels: ['Frontend', 'Backend', 'DevOps', 'Data Science', 'Security'],
                            datasets: [{
                                label: 'Skills',
                                data: [80, 60, 45, 90, 70],
                                borderColor: '#6366f1',
                                backgroundColor: 'rgba(99, 102, 241, 0.1)'
                            }]
                        },
                        options: { scales: { r: { grid: { color: '#1e293b' }, angleLines: { color: '#1e293b' }, ticks: { display: false } } }, plugins: { legend: { display: false } } }
                    });
                };

                const downloadAnalysis = () => {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF();
                    doc.text("CareerLens AI - Report", 10, 10);
                    doc.text(`Candidate: ${resumeData.value.name}`, 10, 20);
                    doc.save("Report.pdf");
                };

                onMounted(() => {
                    runSplash();
                    // Matrix Effect
                    const c = document.getElementById("bg-canvas");
                    const ctx = c.getContext("2d");
                    c.width = window.innerWidth; c.height = window.innerHeight;
                    const drops = Array(Math.floor(c.width/20)).fill(1);
                    const draw = () => {
                        ctx.fillStyle = "rgba(0, 0, 0, 0.05)"; ctx.fillRect(0, 0, c.width, c.height);
                        ctx.fillStyle = "#1e1b4b"; ctx.font = "15px monospace";
                        drops.forEach((y, i) => {
                            ctx.fillText(Math.floor(Math.random()*2), i*20, y*20);
                            if(y*20 > c.height && Math.random() > 0.975) drops[i] = 0;
                            drops[i]++;
                        });
                    };
                    setInterval(draw, 50);
                });

                return { showSplash, splashProgress, splashStatus, lang, t, handleFileUpload, resumeData, atsScore, interviewQuestions, downloadAnalysis };
            }
        }).mount('#app');
    </script>
</body>
</html>
